{{ block title }}
    Introduction
    <style>
        table.grade-table td, table.grade-table th {
            border: 1px solid black;
            padding: 5px;
        }
    </style>
{{ endblock }}
{{ block content }}
    <div>
        8 participants solved a test. 5 are selected to receive a reward.
        {{ if treatment == "control" }}
            We selected the 5 best performers among these 8 people.
        {{ elif treatment == "caste" }}
            3 of the 5 are the top scorers in the group of 8. The remaining 2 seats are reserved for the best
            performing SC candidates.
        {{ elif treatment == "ews" }}
            3 of the 5 are the top scorers in the group of 8. The remaining 2 seats are reserved for the best
            performing EWS candidates.
        {{ endif }}
        <br><br>
        On the next screen, the computer will show you some information about these 8 participants, including their
        "grade", which will tell you the range of their marks out of 100. These are the ranges per grade:
        <br><br>
        <table class="grade-table">
            <tr>
                <th>Grade</th><th>Range</th>
            </tr>
            <tr>
                <td>A</td><td>75 - 100</td>
            </tr>
            <tr>
                <td>B</td><td>50 - 74</td>
            </tr>
            <tr>
                <td>C</td><td>25 - 49</td>
            </tr>
            <tr>
                <td>D</td><td>0 - 24</td>
            </tr>
        </table>
        <br><br>
        Based on the information on the next screen, please write what you think the actual score (marks) of each
        participant was.
    </div>
    <br><br>
    <div>
        <ul>
          <li>
              You may earn a bonus of {{ bonus }} for each score report you make for the 8 test-takers.
          </li>
          <li>
              <strong> The likelihood of you receiving the bonus of {{ bonus }} is higher, the closer your reported
                  score is to the true score of a test-taker.</strong>
          </li>
          <li>
              If you report your estimates accurately and truthfully, this will be best for you in terms of your
              expected payment from the experiment.
          </li>
          <li>
              Below we will explain the <span style="text-decoration: underline">payment procedure</span> and some
              <span style="text-decoration: underline">examples</span> of how it will work. You are invited to review these explanations.
              Please note that they are not necessary to understand the experiment and can be skipped without any harm
              if you are not interested.
          </li>
        </ul>
    </div>

    <table stlye="width: 100%">
        <tr>
            <th style="width:30%"><a id="a-payment" onclick="toggleInfo('a-payment', 'description-payment');">Payment
                procedure (click to expand):</a></th>
            <th style="width:20%"></th>
            <th style="width:30%"><a id="a-examples" onclick="toggleInfo('a-examples', 'examples');">Examples (click to expand):</a></th>
        </tr>
        <tr>
            <td>
                <div id="description-payment" style="display: none">
                    After you finished reporting your estimates for all scores, for each of the scores reported
                    across all 8 test-takes you may earn a bonus of {{ bonus }} as follows:
                    <br><br>
                    1) The computer will randomly select a number between 0 and 625. Every number between 0 and 625
                    is equally likely.
                    <br><br>
                    2) The difference between your reported score estimate and the true score is the so-called
                    prediction error. If your prediction error, multiplied by itself, is not larger than the random
                    number then you will receive the {{ bonus }} bonus. Otherwise, you will receive no bonus.
                    <br><br>
                    You may wonder why we have chosen this payment rule. The reason is that this payment rule makes
                    it optimal for you to indicate your true estimates.
                </div>
            </td>
            <td></td>
            <td>
                <div id="examples" style="display: none">
                    <em>Example 1:</em>
                    <br><br>
                    Let's suppose you report a score 85 for test-taker 1, while their true score is 80. Thus, your
                    prediction error is (85-80) = 5. Your prediction error, multiplied by itself, is 25. If the
                    random number that is drawn by the computer is greater than or equal to 25, for example 60, then
                    you will receive the {{ bonus }} bonus. If the random number that is drawn by the computer is
                    smaller than 25, for example 20, then you will receive no bonus.
                    <br><br>
                    <em>Example 2:</em>
                    <br><br>
                    Let's suppose you report a score 54 for test-taker 2, while their true score is 65. Thus, your
                    prediction error is (54-65) = -11. Your prediction error, multiplied by itself, is 121. If the
                    random number that is drawn by the computer is greater than or equal to 121, for example 350,
                    then you will receive the XX bonus. If the random number that is drawn by the computer is
                    smaller than 121, for example 57, then you will receive no bonus.
                </div>
            </td>
        </tr>
    </table>
    <br><br>
    {{ formfields }}
    {{ next_button }}

    <script>
        /**
         * Toggle whether a div is shown or not with a button or a element, changing its text accordingly.
         *
         * @param btnId Id of the element the click on which toggles the info box.
         * @param divId Id of the div containing the info box.
         */
        function toggleInfo(btnId, divId) {
            const btn = document.getElementById(btnId);
            const div = document.getElementById(divId);

            const textHide = "click to hide";
            const textShow = "click to expand";

            if (div.style.display === "block") {
                div.style.display = "none";
                btn.innerHTML = btn.innerHTML.replace(textHide, textShow);
            } else {
                div.style.display = "block";
                btn.innerHTML = btn.innerHTML.replace(textShow, textHide);
            }
        }
    </script>

{{ endblock }}
