{{ block title }}
    Allocation
{{ endblock }}
{{ block content }}
    <style>
        div._formfield, div.controls, input.form-control {
            display: inline-block;
            width: 1.5cm;
        }

        table.grade-table td, table.grade-table th {
            border: 1px solid black;
            padding: 5px;
        }
    </style>

    <table id="participant-table" class="table">
        <tr>
            {{ for key in keys}}
                {{ if key == "Score"  }}
                    <th>Allocation</th>
                {{ elif key != "AA income" and key != "AA caste" }}
                    <th>{{ key }}</th>
                {{ endif }}
            {{ endfor }}
        </tr>

        {{ for participant in participant_data}}
        <tr>
            {{ for key in keys}}
                {{ if key != "AA income" and key != "AA caste" }}
                    <td>
                        {{ for k, v in participant.items }}
                            {{ if k == key}}
                                {{ if key != "Score" and key != "formfield_name"}}
                                    {{ v }}
                                {{ else if key == "Score"}}
                                    {{ formfield participant.formfield_name }} %
                                    {{ formfield_errors participant.formfield_name }}
                                {{ endif }}
                            {{ endif }}
                        {{ endfor }}
                    </td>
                {{ endif }}
            {{ endfor }}
        </tr>
    {{ endfor }}
    </table>
    <br><br>
    {{ next_button }}
{{ endblock }}


